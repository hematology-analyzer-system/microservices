<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Danh sách đơn hàng</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 8px; }
        table { width: 100%; margin-top: 20px; }
    </style>
</head>
<body>
<h2>Danh sách đơn hàng</h2>
<button onclick="fetchOrders()">Làm mới</button>
<table id="ordersTable">
    <thead>
    <tr>
        <th>ID</th>
        <th>Họ</th>
        <th>Tên</th>
        <th>Điện thoại</th>
        <th>Địa chỉ</th>
        <th>Sản phẩm</th>
    </tr>
    </thead>
    <tbody></tbody>
</table>
<a href="/register-form">← Quay lại đăng ký</a>

<script>
    const tableBody = document.querySelector('#ordersTable tbody');

    async function fetchOrders() {
        tableBody.innerHTML = '';
        try {
            const res = await fetch('/order');
            const orders = await res.json();

            for (const o of orders) {
                const row = `<tr>
            <td>${o.orderId}</td>
            <td>${o.firstName}</td>
            <td>${o.lastName}</td>
            <td>${o.phoneNumber}</td>
            <td>${o.address}</td>
            <td>${o.productName}</td>
          </tr>`;
                tableBody.insertAdjacentHTML('beforeend', row);
            }
        } catch (err) {
            tableBody.innerHTML = '<tr><td colspan="6">Không thể tải dữ liệu</td></tr>';
        }
    }

    fetchOrders();
</script>
</body>
</html>
